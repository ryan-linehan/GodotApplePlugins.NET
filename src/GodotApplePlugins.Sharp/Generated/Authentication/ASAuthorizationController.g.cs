// <auto-generated>
// This code was generated by GodotApplePlugins.Generator.
// Do not edit this file directly. Edit the generator instead.
// </auto-generated>

#nullable enable

using Godot;
using System;
using System.Linq;

namespace GodotApplePlugins.Sharp.Authentication;

/// <summary>
/// Manages authorization requests for Apple ID and other services.
/// </summary>
public partial class ASAuthorizationController
{
    private readonly GodotObject _instance;

    /// <summary>
    /// Creates a new ASAuthorizationController wrapper.
    /// </summary>
    public ASAuthorizationController(GodotObject instance)
    {
        _instance = instance ?? throw new ArgumentNullException(nameof(instance));
        ConnectSignals();
    }

    /// <summary>
    /// Gets the underlying GDExtension object.
    /// </summary>
    public GodotObject Instance => _instance;

    /// <summary>
    /// Call this method to initiate the signin with Apple workflow with the default scopes ('email', 'full_name'), this will raise the signal authorization_completed upon success, or the authorization_failed on failure.
    /// </summary>
    public void Signin()
    {
        _instance.Call(new StringName("signin"));
    }

    /// <summary>
    /// Call this method to initiate the signin with Apple workflow with a specific set of scopes, currently they can be any of 'email' and 'full_name'. This will raise the event authorization_completed upon success, or the authorization_failed on failure.
    /// </summary>
    public void SigninWithScopes(Godot.Collections.Array scopestrings)
    {
        _instance.Call(new StringName("signin_with_scopes"), scopestrings);
    }

    #region Signals

    /// <summary>
    /// Emitted when the authorization request completes successfully. credential is usually an ASAuthorizationAppleIDCredential or ASPasswordCredential. It can be null if the credential type is unsupported.
    /// </summary>
    public event Action<GodotObject>? AuthorizationCompleted;

    /// <summary>
    /// Emitted when the authorization request fails. error contains the localized description of the error.
    /// </summary>
    public event Action<string>? AuthorizationFailed;

    private void ConnectSignals()
    {
        _instance.Connect(new StringName("authorization_completed"),
            Callable.From<GodotObject>((p0) =>
                AuthorizationCompleted?.Invoke(p0)));

        _instance.Connect(new StringName("authorization_failed"),
            Callable.From<string>((p0) =>
                AuthorizationFailed?.Invoke(p0)));

    }

    #endregion
}
