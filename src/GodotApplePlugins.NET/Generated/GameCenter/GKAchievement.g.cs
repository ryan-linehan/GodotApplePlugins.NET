// <auto-generated>
// This code was generated by GodotApplePlugins.Generator.
// Do not edit this file directly. Edit the generator instead.
// </auto-generated>

#nullable enable

using Godot;
using System;
using System.Linq;
using System.Threading.Tasks;

namespace GodotApplePlugins.NET.GameCenter;

/// <summary>
/// Represents an Apple Game Center achievement and provides helper methods to manage progress.
/// </summary>
public partial class GKAchievement : GodotObject
{
    #region StringName Constants

    private static readonly StringName _methodLoadAchievements = "load_achievements";
    private static readonly StringName _methodReportAchievement = "report_achievement";
    private static readonly StringName _methodResetAchievements = "reset_achievements";
    private static readonly StringName _propertyIdentifier = "identifier";
    private static readonly StringName _propertyIsCompleted = "is_completed";
    private static readonly StringName _propertyLastReportedDate = "last_reported_date";
    private static readonly StringName _propertyPercentComplete = "percent_complete";
    private static readonly StringName _propertyPlayer = "player";
    private static readonly StringName _propertyShowsCompletionBanner = "shows_completion_banner";

    #endregion

    private readonly GodotObject _instance;

    /// <summary>
    /// Creates a new GKAchievement wrapper.
    /// </summary>
    public GKAchievement(GodotObject instance)
    {
        _instance = instance ?? throw new ArgumentNullException(nameof(instance));
    }

    /// <summary>
    /// Gets the underlying GDExtension object.
    /// </summary>
    public GodotObject Instance => _instance;

    /// <summary>
    /// The achievement identifier configured on App Store Connect.
    /// </summary>
    public string Identifier
    {
        get => _instance.Get(_propertyIdentifier).AsString();
        set => _instance.Set(_propertyIdentifier, value);
    }

    /// <summary>
    /// Read-only flag that mirrors GameKit's [code]isCompleted[/code] property.
    /// </summary>
    public bool IsCompleted
    {
        get => _instance.Get(_propertyIsCompleted).AsBool();
        set => _instance.Set(_propertyIsCompleted, value);
    }

    public double LastReportedDate
    {
        get => _instance.Get(_propertyLastReportedDate).AsDouble();
        set => _instance.Set(_propertyLastReportedDate, value);
    }

    /// <summary>
    /// The player's reported completion percentage (0-100). Update this and then call [method report_achievement] to submit it.
    /// </summary>
    public double PercentComplete
    {
        get => _instance.Get(_propertyPercentComplete).AsDouble();
        set => _instance.Set(_propertyPercentComplete, value);
    }

    /// <summary>
    /// The [code skip-lint]GKPlayer[/code] owner of this achievement, if GameKit was able to resolve it.
    /// </summary>
    public GKPlayer Player
    {
        get => new GKPlayer((GodotObject)_instance.Get(_propertyPlayer).Obj!);
        set => _instance.Set(_propertyPlayer, value.Instance);
    }

    /// <summary>
    /// Matches Apple's [code]showsCompletionBanner[/code] flag. Set it to true when you want the system to display the stock achievement toast when the progress hits 100%.
    /// </summary>
    public bool ShowsCompletionBanner
    {
        get => _instance.Get(_propertyShowsCompletionBanner).AsBool();
        set => _instance.Set(_propertyShowsCompletionBanner, value);
    }

    /// <summary>
    /// Loads the achievements that the local player has already reported. The callback is invoked with [code skip-lint]ArrayGKAchievement' and a [code skip-lint]Variant' error argument ('null' on success, or a localized error string).
    /// </summary>
    public void LoadAchievements(Callable callback)
    {
        _instance.Call(_methodLoadAchievements, callback);
    }

    /// <summary>
    /// Submits the new state for the provided achievements. The callback receives a single [code skip-lint]Variant' that is 'null' on success or contains an error string reported by GameKit. This is the method used in the "Report Progress" snippet inside [code skip-lint]GameCenterGuide.md'.
    /// </summary>
    public void ReportAchievement(Godot.Collections.Array achievements, Callable callback)
    {
        _instance.Call(_methodReportAchievement, achievements, callback);
    }

    /// <summary>
    /// Asks GameKit to clear every achievement for the local player. The callback receives 'null' on success or a [code skip-lint]Variant' with the error description, matching Apple's 'resetAchievements' API.
    /// </summary>
    public void ResetAchievements(Callable callback)
    {
        _instance.Call(_methodResetAchievements, callback);
    }

}
