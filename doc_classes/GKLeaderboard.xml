<?xml version="1.0" encoding="UTF-8" ?>
<class name="GKLeaderboard" inherits="RefCounted" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/godotengine/godot/master/doc/class.xsd">
	<brief_description>
		Accesses Apple Game Center leaderboards and their entries.
	</brief_description>
	<description>
		[code skip-lint]GKLeaderboard[/code] lets you fetch configured leaderboards, submit scores, and read player ranks as described in the Leaderboards section of [code skip-lint]GameCenterGuide.md[/code]. All operations mirror Apple's asynchronous APIs, so every method expects a [code skip-lint]Callable[/code] that receives the requested data plus an optional error [code skip-lint]Variant[/code]. See Apple's reference at [url=https://developer.apple.com/documentation/gamekit/gkleaderboard]Apple's GKLeaderboard documentation[/url].

		Submitting a score (guide sample):
		[codeblocks]
		[gdscript]
		var local_player := GameCenterManager.new().local_player

		GKLeaderboard.load_leaderboards(["MyLeaderboard"], func(leaderboards: Array[GKLeaderboard], error: Variant) -&gt; void:
		    if error:
		        print("Load leaderboard error %s" % error)
		        return

		    var score := 100
		    var context := 0
		    leaderboards[0].submit_score(score, context, local_player, func(submit_error: Variant) -&gt; void:
		        if submit_error:
		            print("Error submitting leaderboard %s" % submit_error)
		    )
		)
		[/gdscript]
		[/codeblocks]

		Loading all versus specific leaderboards:
		[codeblocks]
		[gdscript]
		# Loads all leaderboards configured for the app.
		GKLeaderboard.load_leaderboards([], func(all_leaderboards: Array[GKLeaderboard], error: Variant) -&gt; void:
		    print("Received %d leaderboards" % all_leaderboards.size())
		)

		# Loads only the identifiers you pass in.
		GKLeaderboard.load_leaderboards(["My leaderboard"], func(named_leaderboards: Array[GKLeaderboard], error: Variant) -&gt; void:
		    print("Received %d specific leaderboards" % named_leaderboards.size())
		)
		[/gdscript]
		[/codeblocks]
	</description>
	<tutorials>
	</tutorials>
	<methods>
		<method name="load_entries">
			<return type="void" />
			<param index="0" name="players" type="Array" />
			<param index="1" name="timeScope" type="TimeScope" />
			<param index="2" name="callback" type="Callable" />
			<description>
				Loads the local player's score together with the specified [code skip-lint]Array[/code] of [code skip-lint]GKPlayer[/code] objects for the given time scope (use the [enum TimeScope] values). The callback receives [code](GKLeaderboardEntry local, Array[GKLeaderboardEntry] scores, Variant error)[/code] where the first entry can be [code]null[/code] if the local player has not posted a score.
			</description>
		</method>
		<method name="load_image">
			<return type="void" />
			<param index="0" name="callback" type="Callable" />
			<description>
				Downloads the leaderboard icon. The callback arguments are [code](Image image, Variant error)[/code] with exactly one being [code]null[/code], matching the [code skip-lint]load_image[/code] helper shown in the guide.
			</description>
		</method>
		<method name="load_leaderboards" qualifiers="static">
			<return type="void" />
			<param index="0" name="ids" type="PackedStringArray" />
			<param index="1" name="callback" type="Callable" />
			<description>
				Fetches leaderboard metadata. Pass an empty array to load every leaderboard configured for the app, or provide specific identifiers. The callback receives [code skip-lint]Array[GKLeaderboard][/code] and a [code skip-lint]Variant[/code] error string ([code]null[/code] on success).
			</description>
		</method>
		<method name="load_local_player_entries">
			<return type="void" />
			<param index="0" name="playerScope" type="PlayerScope" />
			<param index="1" name="timeScope" type="TimeScope" />
			<param index="2" name="rangeStart" type="int" />
			<param index="3" name="rangeLenght" type="int" />
			<param index="4" name="callback" type="Callable" />
			<description>
				Loads leaderboard entries for the local player.  The callback receives [code](GKLeaderboardEntry local, Array[GKLeaderboardEntry] scores, Variant range, Variant error)[/code] where the first entry can be [code]null[/code] if the local player has not posted a score.   The value `range` is the number of total player count that matched the scope. Supply [enum PlayerScope] and [enum TimeScope] integers for the first two parameters.
			</description>
		</method>
		<method name="submit_score">
			<return type="void" />
			<param index="0" name="score" type="int" />
			<param index="1" name="context" type="int" />
			<param index="2" name="player" type="GKPlayer" />
			<param index="3" name="callback" type="Callable" />
			<description>
				Submits a score for the provided player. The callback receives a [code skip-lint]Variant[/code] with the error string or [code]null[/code] when the submission succeeds. See [code skip-lint]GameCenterGuide.md[/code] for an end-to-end example.
			</description>
		</method>
	</methods>
	<members>
		<member name="activity_identifier" type="String" setter="" getter="get_activity_identifier" default="&quot;&quot;">
			Beta-only identifier for activity leaderboards (empty on platforms that do not expose the value).
		</member>
		<member name="activity_properties" type="Dictionary" setter="" getter="get_activity_properties" default="{}">
			Dictionary copy of Apple's [code]activityProperties[/code], containing keys such as [code]eventStartDate[/code] when available.
		</member>
		<member name="duration" type="float" setter="" getter="get_duration" default="0.0">
			Leaderboard duration in seconds for recurring leaderboards.
		</member>
		<member name="group_identifier" type="String" setter="" getter="get_group_identifier" default="&quot;&quot;">
			Group identifier that you configured in App Store Connect, or an empty string if not grouped.
		</member>
		<member name="next_start_date" type="float" setter="" getter="get_next_start_date" default="0.0">
		</member>
		<member name="start_date" type="float" setter="" getter="get_start_date" default="0.0">
		</member>
		<member name="title" type="String" setter="" getter="get_title" default="&quot;&quot;">
			Display name shown to players.
		</member>
		<member name="type" type="int" setter="" getter="get_type" default="0">
			The Apple leaderboard type returned as an integer value: [code]0[/code] ([code skip-lint]classic[/code]), [code]1[/code] ([code skip-lint]recurring[/code]), or [code]2[/code] ([code skip-lint]unknown[/code]).
		</member>
	</members>
	<constants>
		<constant name="CLASSIC" value="0" enum="AppleLeaderboardType">
			A leaderboard that never expires, showing all-time rankings of all players.
		</constant>
		<constant name="RECURRING" value="1" enum="AppleLeaderboardType">
			A leaderboard that recurs, allowing players a fresh start to compete and earn higher ranks in each ocurrence.
		</constant>
		<constant name="UNKNOWN" value="2" enum="AppleLeaderboardType">
		</constant>
		<constant name="TODAY" value="0" enum="TimeScope">
			Scans the current day.
		</constant>
		<constant name="WEEK" value="1" enum="TimeScope">
			Restricts results to the current week.
		</constant>
		<constant name="ALL_TIME" value="2" enum="TimeScope">
			Returns scores across the entire history of the leaderboard.
		</constant>
		<constant name="GLOBAL" value="0" enum="PlayerScope">
			Loads data for all players of the game.
		</constant>
		<constant name="FRIENDS_ONLY" value="1" enum="PlayerScope">
			Loads only data for friends of the local player.
		</constant>
	</constants>
</class>
